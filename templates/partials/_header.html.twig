{% from 'partials/_icons.html.twig' import phone, email, facebook, instagram, linkedin %}
{% set is_home = app.request.attributes.get('_route') == 'app_home' %}

<header class="site-header{{ not is_home ? ' site-header--solid' : '' }}" id="site-header" data-transparent="{{ is_home ? '1' : '0' }}">

{# Top Bar #}
<div class="top-bar">
    <div class="container">
        <div class="top-bar__contact">
            <a href="tel:+33123456789">
                {{ phone() }}
                +33 1 23 45 67 89
            </a>
            <a href="mailto:contact@example.com">
                {{ email() }}
                contact@example.com
            </a>
        </div>
        <div class="top-bar__social">
            <a href="#" aria-label="Facebook">{{ facebook() }}</a>
            <a href="#" aria-label="Instagram">{{ instagram() }}</a>
            <a href="#" aria-label="LinkedIn">{{ linkedin() }}</a>
        </div>
    </div>
</div>

{# Navbar #}
<nav class="navbar">
    <div class="container">
        <a href="{{ path('app_home') }}" class="navbar__brand">ProService</a>

        <button class="navbar__toggle" aria-label="Menu" aria-expanded="false">
            <span></span>
            <span></span>
            <span></span>
        </button>

        {% set current_route = app.request.attributes.get('_route') ?? '' %}
        <ul class="navbar__menu" id="navbar-menu">
            <li><a href="{{ path('app_home') }}" class="navbar__link{{ current_route == 'app_home' ? ' navbar__link--active' : '' }}">Accueil</a></li>
            <li><a href="{{ path('app_services') }}" class="navbar__link{{ current_route == 'app_services' ? ' navbar__link--active' : '' }}">Services</a></li>
            <li><a href="{{ path('app_about') }}" class="navbar__link{{ current_route == 'app_about' ? ' navbar__link--active' : '' }}">À propos</a></li>
            <li><a href="{{ path('app_team') }}" class="navbar__link{{ current_route == 'app_team' ? ' navbar__link--active' : '' }}">Équipe</a></li>
            <li><a href="#" class="navbar__link">Blog</a></li>
            <li><a href="#" class="navbar__link">Galerie</a></li>
            <li><a href="#" class="navbar__link">Contact</a></li>
            <li class="navbar__cta-mobile"><a href="#" class="navbar__cta">Réserver en ligne</a></li>
            {% if app.user %}
                <li class="navbar__auth-mobile"><a href="#" class="navbar__link">Mon compte</a></li>
                <li class="navbar__auth-mobile"><a href="{{ path('app_logout') }}" class="navbar__link navbar__link--danger">Déconnexion</a></li>
            {% else %}
                <li class="navbar__auth-mobile"><a href="{{ path('app_login') }}" class="navbar__link">Connexion</a></li>
            {% endif %}
        </ul>

        <div class="navbar__right">
            {% if app.user %}
                <div class="navbar__user-dropdown" id="user-dropdown">
                    <button type="button" class="navbar__auth-link navbar__user-trigger" id="user-dropdown-trigger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                        {{ app.user.firstName }}
                        <svg class="navbar__user-chevron" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
                    </button>
                    <div class="navbar__dropdown-menu" id="user-dropdown-menu">
                        <a href="#" class="navbar__dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                            Mon compte
                        </a>
                        <a href="{{ path('app_logout') }}" class="navbar__dropdown-item navbar__dropdown-item--danger">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
                            Déconnexion
                        </a>
                    </div>
                </div>
            {% else %}
                <a href="{{ path('app_login') }}" class="navbar__auth-link">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    Connexion
                </a>
            {% endif %}
            <a href="#" class="navbar__cta navbar__cta--desktop">Réserver en ligne</a>
        </div>
    </div>
</nav>

</header>

